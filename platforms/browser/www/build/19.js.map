{"version":3,"sources":["../../src/pages/report-full/report-full.module.ts","../../src/pages/report-full/report-full.ts"],"names":[],"mappings":"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","file":"19.js","sourcesContent":["import { CalendarModule } from 'ion2-calendar';\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ReportFullPage } from './report-full';\n\n@NgModule({\n  declarations: [\n    ReportFullPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ReportFullPage),\n    CalendarModule\n  ],\n})\nexport class ReportFullPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/report-full/report-full.module.ts","import { CodesProvider } from './../../providers/codes/codes';\nimport { RestProvider } from './../../providers/rest/rest';\nimport { Component, NgZone } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController, ViewController } from 'ionic-angular';\nimport { CalendarComponentOptions } from 'ion2-calendar';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-report-full',\n  templateUrl: 'report-full.html',\n})\nexport class ReportFullPage {\n\n  shops : any = [];\n  vehicles : any = [];\n  html : any = '';\n  vehicle_id : any = '';\n  from_date : any ='';\n  to_date : any = '';\n  worker_id : any = '';\n  dateMulti: string[];\n  dt = new Date(2000,1,1);\n  displayCalendar : boolean = false;\n  dateRange: any =  { from: '', to: '' };\n  downloadURL : any = '';\n  srth_id : any = '';\n\n  apiendpoint : any = '';\n  downloadendpoint : any = '';\n\n  optionsMulti: CalendarComponentOptions = {\n    pickMode: 'range',\n    from:this.dt,\n    to:0,\n    showMonthPicker:true,\n    showToggleButtons:true,\n    color:'primary'\n  };\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, private rest : RestProvider,\n    private codes : CodesProvider, private modalCtrl : ModalController, private viewCont : ViewController,\n    private zone : NgZone) {\n      \n      if(this.navParams.get(\"person\") != null || this.navParams.get(\"person\") != undefined) {\n        this.worker_id = this.navParams.get(\"person\")['worker_id'];\n      }\n\n      var json = JSON.parse(localStorage.getItem(this.codes.K_ACCOUNT_INFO));\n      this.srth_id = json[0]['srth_id'];\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ReportFullPage');\n    if(this.navParams.get('worker_type') == 'driver') {\n      this.getDrivers();  \n    } else {\n      this.getPersons();\n    }\n  }\n\n  getDrivers(){\n    var json = JSON.parse(localStorage.getItem(this.codes.K_ACCOUNT_INFO));\n    var data = {\n      \"srth_id\":json[0]['srth_id']\n    };\n\n    this.rest.post(this.codes.GET_WORKER,data ).then(resp => {\n        if(resp['_ReturnCode'] == '0'){\n          var data = resp['data'];\n          for(let i=0;i<data.length;i++) {\n            if(data[i]['worker_type'] == 'driver')\n              this.shops.push(data[i]);\n          }\n        }\n    });\n  }\n\n  getPersons(){\n    var json = JSON.parse(localStorage.getItem(this.codes.K_ACCOUNT_INFO));\n    var data = {\n      \"srth_id\":json[0]['srth_id']\n    };\n\n    this.rest.post(this.codes.GET_WORKER,data ).then(resp => {\n        if(resp['_ReturnCode'] == '0'){\n          this.shops = resp['data'];\n        }\n    });\n  }\n\n  openCalendar() {\n    this.displayCalendar = true;\n  }\n\n\n  generateReport(){\n    this.displayCalendar = false;\n\n    if(this.worker_id == 0)\n      this.worker_id = null;\n\n\n    var data = {\n      \"worker_id\":this.worker_id,\n      \"date_from\":this.dateRange['from'],\n      \"date_to\":this.dateRange['to'],\n      \"srth_id\":this.srth_id\n    };\n    this.rest.post(this.codes.FULL_REPORT,data).then(resp => {\n      console.log(resp);\n      document.getElementById(\"report\").innerHTML = resp['data'];\n      this.zone.run(() => {\n        console.log(\"screen refreshed\");\n      });\n      // this.html = resp['data'];\n    })\n\n    this.downloadURL = this.codes.FULL_REPORT_DOWNLOAD+\"?worker_id=\"+this.worker_id+\"&date_from=\"+this.dateRange['from']+\"&date_to=\"+this.dateRange['to'];\n  \n  }\n\n  dismiss(){\n    this.viewCont.dismiss();\n  }\n \n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/report-full/report-full.ts"],"sourceRoot":""}