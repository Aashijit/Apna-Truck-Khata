{"version":3,"sources":["../../src/pages/vehicle-document-bill/vehicle-document-bill.module.ts","../../src/pages/vehicle-document-bill/vehicle-document-bill.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACkB;AAUlE;IAAA;IAA4C,CAAC;IAAhC,6BAA6B;QARzC,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,uFAAuB;aACxB;YACD,OAAO,EAAE;gBACP,8DAAe,CAAC,QAAQ,CAAC,uFAAuB,CAAC;aAClD;SACF,CAAC;OACW,6BAA6B,CAAG;IAAD,oCAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;ACZwB;AACG;AAC3B;AACmE;AAQ7G;IAiBE,iCAAmB,OAAsB,EAAS,SAAoB,EAAU,KAAqB,EAAU,IAAmB,EACxH,SAA2B,EAAU,KAAsB,EAAU,GAAuB;QADnF,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAU,UAAK,GAAL,KAAK,CAAgB;QAAU,SAAI,GAAJ,IAAI,CAAe;QACxH,cAAS,GAAT,SAAS,CAAkB;QAAU,UAAK,GAAL,KAAK,CAAiB;QAAU,QAAG,GAAH,GAAG,CAAoB;QAhBtG,aAAQ,GAAS,EAAE,CAAC;QACpB,gBAAW,GAAS,EAAE,CAAC;QACvB,gBAAW,GAAS,EAAE,CAAC;QACvB,QAAG,GAAS,IAAI,CAAC;QACjB,eAAU,GAAS,CAAC,CAAC;QACrB,eAAU,GAAS,EAAE,CAAC;QAEtB,qBAAgB,GAAS,EAAE,CAAC;QAC5B,kBAAa,GAAS,EAAE,CAAC;QACzB,gBAAW,GAAS,EAAE,CAAC;QACvB,cAAS,GAAS,EAAE,CAAC;QACrB,YAAO,GAAS,EAAE,CAAC;QACnB,aAAQ,GAAS,EAAE,CAAC;QACpB,WAAM,GAAS,EAAE,CAAC;QAId,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QACjD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;QACrD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;QAC3C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QAC/C,EAAE,EAAC,IAAI,CAAC,MAAM,IAAI,MAAM,CAAC,CAAC,CAAC;YACzB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;YAC7C,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;YAC5C,GAAG,EAAC,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAC,CAAC,EAAE,EAAC,CAAC;gBACrC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC,gBAAgB,CAAC,CAAC;gBAC7K,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,sBAAsB,CAAC,IAAI,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC;YACnK,CAAC;YACD,IAAI,CAAC,UAAU,EAAE,CAAC;QACpB,CAAC;IACL,CAAC;IAED,gDAAc,GAAd;QACE,OAAO,CAAC,GAAG,CAAC,wCAAwC,CAAC,CAAC;IACxD,CAAC;IAED,yCAAO,GAAP;QACE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;IACvB,CAAC;IAED,6CAAW,GAAX;QAAA,iBAeC;QAdC,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC;QAC3E,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC;YACvB,OAAO,EAAC,yBAAyB;SAClC,CAAC,CAAC;QACH,EAAE,CAAC,OAAO,EAAE,CAAC;QACb,IAAI,IAAI,GAAG;YACT,uBAAuB,EAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;SAC/C,CAAC;QACF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,mBAAmB,EAAC,IAAI,CAAC,CAAC,IAAI,CAAC,cAAI;YAC3D,EAAE,CAAC,OAAO,EAAE,CAAC;YACb,EAAE,EAAC,IAAI,CAAC,aAAa,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;gBAC9B,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC;YAC/B,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED,yCAAO,GAAP;QACE,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,GAAG,EAAC,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAC,CAAC,EAAE,EAAC,CAAC;YACtC,EAAE,EAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,UAAU,CAAC;gBACnD,GAAG,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC,CAAC;QAC7C,CAAC;QAED,IAAI,IAAI,GACN;YACE,aAAa,EAAC,IAAI,CAAC,WAAW;YAC9B,aAAa,EAAC,IAAI,CAAC,WAAW;YAC9B,YAAY,EAAC,IAAI,CAAC,UAAU;YAC5B,gBAAgB,EAAC,GAAG;SACrB,CAAC;QAEF,EAAE,EAAC,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,CAAC,CAAC;YACpB,IAAI,CAAC,KAAK,CAAC,GAAC,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;YACjC,IAAI,CAAC,WAAW,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;QAC5C,CAAC;QAED,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAExB,IAAI,CAAC,UAAU,EAAE,CAAC;QAGlB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;IAEpB,CAAC;IAED,4CAAU,GAAV,UAAW,EAAE;QACX,IAAI,UAAU,GAAG,EAAE,CAAC;QACpB,GAAG,EAAC,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAC,CAAC,EAAE,EAAE,CAAC;YACtC,EAAE,EAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC,YAAY,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,IAAI,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC;YAC9G,CAAC;YAAA,IAAI,CAAC,CAAC;gBACL,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC;YACnC,CAAC;QACH,CAAC;QACD,IAAI,CAAC,OAAO,GAAG,UAAU,CAAC;QAC1B,IAAI,CAAC,UAAU,EAAE,CAAC;IACpB,CAAC;IAED,2CAAS,GAAT;QACE,YAAY,CAAC,OAAO,CAAC,wBAAwB,EAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;QAC5E,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;IACvB,CAAC;IAED,4CAAU,GAAV;QACE,8BAA8B;QAC9B,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;QACpB,GAAG,EAAC,IAAI,CAAC,GAAC,CAAC,EAAC,CAAC,GAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAC,CAAC,EAAE,EAAC,CAAC;YACrC,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;QACrF,CAAC;IACH,CAAC;IAED,iDAAe,GAAf,UAAgB,GAAG;QAAnB,iBAwBC;QAvBC,IAAI,IAAI,GAAG;YACT,kBAAkB,EAAC,IAAI,CAAC,gBAAgB;YACxC,eAAe,EAAC,IAAI,CAAC,aAAa;SACnC,CAAC;QACF,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAC;QAEvE,IAAI,KAAK,GAAG;YACV,SAAS,EAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;YAC5B,aAAa,EAAC,IAAI,CAAC,WAAW;YAC9B,WAAW,EAAC,IAAI,CAAC,SAAS;YAC1B,eAAe,EAAC,cAAc;YAC9B,MAAM,EAAC,OAAO;YACd,WAAW,EAAC,IAAI,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,GAAC,GAAG,GAAC,IAAI,CAAC,GAAG,EAAE,GAAC,MAAM;YACpD,MAAM,EAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;SAC5B;QAED,IAAI,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,iBAAiB,EAAC,EAAC,SAAS,EAAC,KAAK,EAAC,CAAC,CAAC;QAEjF,eAAe,CAAC,YAAY,CAAC,cAAI;YAC/B,KAAI,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC,CAAC;QAC/D,CAAC,CAAC,CAAC;QAEH,eAAe,CAAC,OAAO,EAAE,CAAC;IAC5B,CAAC;IAED,oDAAkB,GAAlB,UAAmB,GAAG;QAAtB,iBAQC;QAPC,IAAI,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC;QAEnE,iBAAiB,CAAC,YAAY,CAAC,cAAI;YACjC,KAAI,CAAC,WAAW,GAAG,YAAY,CAAC,OAAO,CAAC,KAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAC3D,CAAC,CAAC,CAAC;QAEH,iBAAiB,CAAC,OAAO,EAAE,CAAC;IAC9B,CAAC;IAvJU,uBAAuB;QAJnC,gEAAS,CAAC;YACT,QAAQ,EAAE,4BAA4B;WACG;SAC1C,CAAC;yIAkB4B,kEAAiC,EAAqE;YAC5G,eAAe,EAAkB,GAA+C;OAlB3F,uBAAuB,CAyJnC;IAAD,CAAC;AAAA;SAzJY,uBAAuB,iB","file":"6.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { VehicleDocumentBillPage } from './vehicle-document-bill';\n\n@NgModule({\n  declarations: [\n    VehicleDocumentBillPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(VehicleDocumentBillPage),\n  ],\n})\nexport class VehicleDocumentBillPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/vehicle-document-bill/vehicle-document-bill.module.ts","import { RestProvider } from './../../../src/providers/rest/rest';\nimport { CodesProvider } from './../../../src/providers/codes/codes';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController, ViewController, LoadingController } from 'ionic-angular';\nimport { tmp } from 'npm';\n\n@IonicPage()\n@Component({\n  selector: 'page-vehicle-document-bill',\n  templateUrl: 'vehicle-document-bill.html',\n})\nexport class VehicleDocumentBillPage {\n\n  vehicles : any = [];\n  bill_amount : any = '';\n  expiry_date : any = '';\n  img : any = null;\n  total_bill : any = 0;\n  vehicle_id : any = '';\n\n  person_shop_name : any = '';\n  document_name : any = '';\n  worker_type : any = '';\n  worker_id : any = '';\n  details : any = [];\n  document : any = '';\n  action : any = '';\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, private codes : CodesProvider, private rest : RestProvider, \n    private modalCtrl : ModalController, private viewC : ViewController, private ldc : LoadingController) {\n      this.getVehicles();\n      this.worker_id = this.navParams.get(\"worker_id\");\n      this.worker_type = this.navParams.get(\"worker_type\");\n      this.action = this.navParams.get(\"action\");\n      this.document = this.navParams.get('document');\n      if(this.action == 'edit') {\n        this.details = this.navParams.get('details');\n        console.error(JSON.stringify(this.details));\n        for(let i=0;i<this.details.length;i++){\n          this.details[i]['vehicle_number'] = this.details[i]['vehicle_detail'] == undefined ? this.details[i]['vehicle_number'] : this.details[i]['vehicle_detail']['vehicle_number'];\n          this.details[i]['expiry_date'] = this.details[i]['document_expiry_date'] != undefined ? this.details[i]['document_expiry_date'] : this.details[i]['expiry_date'];\n        }\n        this.changeCost();\n      }\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad VehicleDocumentBillPage');\n  }\n\n  dismiss(){\n    this.viewC.dismiss();\n  }\n\n  getVehicles(){\n    var userinfo = JSON.parse(localStorage.getItem(this.codes.K_ACCOUNT_INFO));\n    let lc = this.ldc.create({\n      content:'Loading the vehicles...'\n    });\n    lc.present();\n    var data = {  \n      \"vehicle_owner_srth_id\":userinfo[0]['srth_id']\n    };\n    this.rest.post(this.codes.GET_VEHICLE_DETAILS,data).then(resp => {\n      lc.dismiss();\n      if(resp['_ReturnCode'] == '0') {\n        this.vehicles = resp['data'];\n      }\n    });\n  }\n\n  addItem(){\n    var vno = \"\";\n    for(let i=0;i<this.vehicles.length;i++){\n      if(this.vehicles[i]['vehicle_id'] == this.vehicle_id) \n        vno = this.vehicles[i]['vehicle_number'];\n    }\n\n    var item = \n      {\n        \"bill_amount\":this.bill_amount,\n        \"expiry_date\":this.expiry_date,\n        \"vehicle_id\":this.vehicle_id,\n        \"vehicle_number\":vno\n      };\n\n      if(this.img != null) {\n        item[\"img\"]=this.img['image_id'];\n        item['image_url'] = this.img['image_url'];\n      }\n\n      this.details.push(item);\n\n      this.changeCost();\n\n\n      this.bill_amount = \"\";\n      this.vehicle_id = \"\";\n      this.expiry_date = \"\";\n      this.img = null;\n\n  }\n\n  removeItem(it){\n    var tmpdetails = [];\n    for(let i=0;i<this.details.length;i++) {\n      if(this.details[i]['vehicle_id'] == it['vehicle_id'] && this.details[i]['bill_amount'] == it['bill_amount']) {\n      }else {\n        tmpdetails.push(this.details[i]);\n      }\n    }\n    this.details = tmpdetails;\n    this.changeCost();\n  }\n\n  saveBills(){\n    localStorage.setItem(\"vehicle_document_bills\",JSON.stringify(this.details));\n    this.viewC.dismiss();\n  }\n\n  changeCost(){\n    // alert(JSON.stringify(det));\n    this.total_bill = 0;\n    for(let i=0;i<this.details.length;i++){\n      this.total_bill = Number(this.total_bill) + Number(this.details[i]['bill_amount']);\n    }\n  }\n\n  openCameraPopup(det) {\n    var data = {\n      \"person_shop_name\":this.person_shop_name,\n      \"document_name\":this.document_name\n    };\n    var json = JSON.parse(localStorage.getItem(this.codes.K_ACCOUNT_INFO));\n \n    var data2 = {\n      \"srth_id\":json[0]['srth_id'],\n      \"worker_type\":this.worker_type,\n      \"worker_id\":this.worker_id,\n      \"document_type\":\"documentbill\",\n      \"type\":\"bills\",\n      \"file_name\":json[0]['srth_id']+\"_\"+Date.now()+\".jpg\",\n      \"tags\":JSON.stringify(data)\n    }\n   \n    let cameraModalPage = this.modalCtrl.create('UploadImagePage',{\"request\":data2});\n\n    cameraModalPage.onDidDismiss(resp => {\n      this.img = JSON.parse(localStorage.getItem(\"selectedimage\"));\n    });\n    \n    cameraModalPage.present();\n  }\n\n  openCalendarPopup2(det) {\n    let calendarModalPage = this.modalCtrl.create('CalendarModalPage');\n\n    calendarModalPage.onDidDismiss(data=> {\n      this.expiry_date = localStorage.getItem(this.codes.DATE);\n    });\n\n    calendarModalPage.present();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/vehicle-document-bill/vehicle-document-bill.ts"],"sourceRoot":""}