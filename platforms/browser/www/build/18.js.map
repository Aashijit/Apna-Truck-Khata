{"version":3,"sources":["../../src/pages/report-modal/report-modal.module.ts","../../src/pages/report-modal/report-modal.ts"],"names":[],"mappings":"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","file":"18.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ReportModalPage } from './report-modal';\nimport { CalendarModule } from 'ion2-calendar';\n\n@NgModule({\n  declarations: [\n    ReportModalPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ReportModalPage),\n    CalendarModule\n  ]\n})\nexport class ReportModalPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/report-modal/report-modal.module.ts","import { CodesProvider } from './../../providers/codes/codes';\nimport { RestProvider } from './../../providers/rest/rest';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController, ViewController } from 'ionic-angular';\nimport { CalendarComponentOptions } from 'ion2-calendar';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-report-modal',\n  templateUrl: 'report-modal.html',\n\n})\nexport class ReportModalPage {\n  shops : any = [];\n  vehicles : any = [];\n  html : any = '';\n  vehicle_id : any = '';\n  from_date : any ='';\n  to_date : any = '';\n  worker_id : any = '';\n  dateMulti: string[];\n  dt = new Date(2000,1,1);\n  displayCalendar : boolean = false;\n  dateRange: any =  { from: '', to: '' };\n  downloadURL : any = '';\n\n  apiendpoint : any = '';\n  downloadendpoint : any = '';\n\n  reporttype : any = '';\n\n  // type: 'object'; // 'string' | 'js-date' | 'moment' | 'time' | 'object'\n  optionsMulti: CalendarComponentOptions = {\n    pickMode: 'range',\n    from:this.dt,\n    to:0,\n    showMonthPicker:true,\n    showToggleButtons:true,\n    color:'primary'\n  };\n\n  constructor(public navCtrl: NavController, public navParams: NavParams, private rest : RestProvider,\n    private codes : CodesProvider, private modalCtrl : ModalController, private viewCont : ViewController) {\n\n      this.reporttype = this.navParams.get(\"name\");\n\n      if(this.reporttype == 'shopbuyreport'){\n        this.apiendpoint = this.codes.SHOP_BUY_REPORT;\n        this.downloadendpoint = this.codes.SHOP_BUY_REPORT_DOWNLOAD;\n        this.getShops();\n      }\n      else if(this.reporttype == 'shopbillreport') {\n        this.apiendpoint = this.codes.SHOP_BILL_REPORT;\n        this.downloadendpoint = this.codes.SHOP_BILL_REPORT_DOWNLOAD;\n        this.getShops();\n      } \n      else if(this.reporttype == 'mechanicbuyreport') {\n        this.apiendpoint = this.codes.MECHANIC_BUY_REPORT;\n        this.downloadendpoint = this.codes.MECHANIC_BUY_REPORT_DOWNLOAD;\n        this.getMechanic();\n      }else if(this.reporttype == 'mechanicbillreport') {\n        this.apiendpoint = this.codes.MECHANIC_BILL_REPORT;\n        this.downloadendpoint = this.codes.MECHANIC_BILL_REPORT_DOWNLOAD;\n        this.getMechanic();\n      }\n\n      this.getVehicles();\n  }\n\n  dismiss(){\n    this.viewCont.dismiss();\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ReportModalPage');\n  }\n\n\n  openCalendar() {\n    this.displayCalendar = true;\n  }\n \n\n  generateReport(){\n    this.displayCalendar = false;\n    if(this.reporttype == 'shopbuyreport' || this.reporttype == 'shopbillreport') {\n    if(this.worker_id == 0)\n      this.worker_id = null;\n    if(this.vehicle_id == 0)\n      this.vehicle_id = null;\n    var data = {\n      \"worker_id\":this.worker_id,\n      \"vehicle_id\":this.vehicle_id,\n      \"date_from\":this.dateRange['from'],\n      \"date_to\":this.dateRange['to']\n    };\n    this.rest.post(this.apiendpoint,data).then(resp => {\n      console.log(resp);\n      document.getElementById(\"report\").innerHTML = resp['data'];\n      this.html = resp['data'];\n    })\n\n    this.downloadURL = this.downloadendpoint+\"?worker_id=\"+this.worker_id+\"&vehicle_id=\"+this.vehicle_id+\"&date_from=\"+this.dateRange['from']+\"&date_to=\"+this.dateRange['to'];\n  }\n  else if(this.reporttype == 'mechanicbuyreport' || this.reporttype == 'mechanicbillreport') {\n    if(this.worker_id == 0)\n    this.worker_id = null;\n  if(this.vehicle_id == 0)\n    this.vehicle_id = null;\n  var data = {\n    \"worker_id\":this.worker_id,\n    \"vehicle_id\":this.vehicle_id,\n    \"date_from\":this.dateRange['from'],\n    \"date_to\":this.dateRange['to']\n  };\n  this.rest.post(this.apiendpoint,data).then(resp => {\n    console.log(resp);\n    document.getElementById(\"report\").innerHTML = resp['data'];\n    this.html = resp['data'];\n  })\n\n  this.downloadURL = this.downloadendpoint+\"?worker_id=\"+this.worker_id+\"&vehicle_id=\"+this.vehicle_id+\"&date_from=\"+this.dateRange['from']+\"&date_to=\"+this.dateRange['to'];\n  }\n  }\n\n\n\n  getShops(){\n    var json = JSON.parse(localStorage.getItem(this.codes.K_ACCOUNT_INFO));\n    var data = {\n      \"srth_id\":json[0]['srth_id']\n    };\n\n    this.rest.post(this.codes.GET_WORKER,data ).then(resp => {\n        if(resp['_ReturnCode'] == '0'){\n\n          var dt = resp['data'];\n\n          for(let i=0;i<dt.length;i++){\n            if(dt[i]['worker_type'] == 'shop'){\n              this.shops.push(dt[i]);\n            }\n          }\n        }\n    });\n  }\n\n  getMechanic(){\n    var json = JSON.parse(localStorage.getItem(this.codes.K_ACCOUNT_INFO));\n    var data = {\n      \"srth_id\":json[0]['srth_id']\n    };\n\n    this.rest.post(this.codes.GET_WORKER,data ).then(resp => {\n        if(resp['_ReturnCode'] == '0'){\n\n          var dt = resp['data'];\n\n          for(let i=0;i<dt.length;i++){\n            if(dt[i]['worker_type'] == 'mechanic'){\n              this.shops.push(dt[i]);\n            }\n          }\n        }\n    });\n  }\n\n  getVehicles(){\n    var userinfo = JSON.parse(localStorage.getItem(this.codes.K_ACCOUNT_INFO));\n\n    var data = {\n      \"vehicle_owner_srth_id\":userinfo[0]['srth_id']\n    };\n    this.rest.post(this.codes.GET_VEHICLE_DETAILS,data).then(resp => {\n      if(resp['_ReturnCode'] == '0') {\n        this.vehicles = resp['data'];\n      }\n    });\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/report-modal/report-modal.ts"],"sourceRoot":""}