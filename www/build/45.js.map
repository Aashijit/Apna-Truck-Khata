{"version":3,"sources":["../../src/pages/driver-document/driver-document.module.ts","../../src/pages/driver-document/driver-document.ts"],"names":[],"mappings":"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","file":"45.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { DriverDocumentPage } from './driver-document';\n\n@NgModule({\n  declarations: [\n    DriverDocumentPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(DriverDocumentPage),\n  ],\n})\nexport class DriverDocumentPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/driver-document/driver-document.module.ts","import { MessageProvider } from './../../../src/providers/message/message';\nimport { CodesProvider } from './../../../src/providers/codes/codes';\nimport { RestProvider } from './../../../src/providers/rest/rest';\nimport { Component } from '@angular/core';\nimport { IonicPage, ModalController, NavController, NavParams, ViewController } from 'ionic-angular';\nimport { AddMoreModalPage } from '../add-more-modal/add-more-modal';\nimport { AddPermitPage } from '../add-permit/add-permit';\n\n@IonicPage()\n@Component({\n  selector: 'page-driver-document',\n  templateUrl: 'driver-document.html',\n})\nexport class DriverDocumentPage {\n\n  isShown : boolean = false;\n  driver : any = '';\n  vehicle : any = '';\n  driverJoiningDate : any = '';\n  documents : any = [\n    {\n      \"document_name\":\"National Permit\",\n      \"document_image_id\":\"0\",\n      \"document_expiry_date\":\"\",\n      \"document_reminder_date\":\"\"\n    },\n    {\n      \"document_name\":\"Insurance\",\n      \"document_image_id\":\"0\",\n      \"document_expiry_date\":\"\",\n      \"document_reminder_date\":\"\"\n    },\n    {\n      \"document_name\":\"Pollution Certificate\",\n      \"document_image_id\":\"0\",\n      \"document_expiry_date\":\"\",\n      \"document_reminder_date\":\"\"\n    },\n    {\n      \"document_name\":\"Certificate of fitness\",\n      \"document_image_id\":\"0\",\n      \"document_expiry_date\":\"\",\n      \"document_reminder_date\":\"\"\n    },\n    {\n      \"document_name\":\"Tax token\",\n      \"document_image_id\":\"0\",\n      \"document_expiry_date\":\"\",\n      \"document_reminder_date\":\"\"\n    },\n    {\n      \"document_name\":\"5 Year Authorization\",\n      \"document_image_id\":\"0\",\n      \"document_expiry_date\":\"\",\n      \"document_reminder_date\":\"\"\n    },\n    {\n      \"document_name\":\"Registration Certificate\",\n      \"document_image_id\":\"0\",\n      \"document_expiry_date\":\"\",\n      \"document_reminder_date\":\"\"\n    },\n    {\n      \"document_name\":\"Others 1X\",\n      \"document_image_id\":\"0\",\n      \"document_expiry_date\":\"\",\n      \"document_reminder_date\":\"\"\n    },\n    {\n      \"document_name\":\"Others 2X\",\n      \"document_image_id\":\"0\",\n      \"document_expiry_date\":\"\",\n      \"document_reminder_date\":\"\"\n    }\n  ];\n\n  constructor(private message : MessageProvider, private codes : CodesProvider, private rest : RestProvider, \n    private viewController : ViewController, public navCtrl: NavController, public navParams: NavParams, public modalCtrl : ModalController) {\n      this.driver = this.navParams.get(\"driver\");\n      this.vehicle = this.navParams.get(\"vehicle\");\n      this.driverJoiningDate = this.navParams.get('joining');\n      console.error(\"vehicle : \"+JSON.stringify(this.vehicle));\n\n      var req = {\n        \"type\":\"driver\",\n        \"driver_id\":this.driver['worker_id']\n      };\n\n      this.rest.post(this.codes.GET_DOCUMENT_INFO,req).then(resp => {\n        if(resp['_ReturnCode'] == '0'){\n          if(resp['data'].length > 0) {\n            var docs = resp['data'];\n            for(let i=0;i<docs.length;i++) {\n              for(let j=0;j<this.documents.length;j++) {\n                if(docs[i]['document_name'] == this.documents[j]['document_name']) {\n                  this.documents[j]['dc_id'] = docs[i]['document_id'];\n                  this.documents[j]['document_image_id'] = docs[i]['document_image_id'];\n                  this.documents[j]['document_expiry_date'] = docs[i]['document_expiry_date'];\n                  this.documents[j]['document_reminder_date'] = docs[i]['document_reminder_date'];\n                  this.documents[j]['previous'] = true;\n                }\n              }\n            }\n          }\n          \n        }\n      });\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad DriverDocumentPage');\n  }\n\n  showMore() {\n    if(this.isShown) {\n      document.getElementById(\"fa-arrow-circle-down-driver\").classList.remove(\"fa-arrow-circle-up\");\n      document.getElementById(\"fa-arrow-circle-down-driver\").classList.add(\"fa-arrow-circle-down\");\n    } else {\n      document.getElementById(\"fa-arrow-circle-down-driver\").classList.remove(\"fa-arrow-circle-down\");\n      document.getElementById(\"fa-arrow-circle-down-driver\").classList.add(\"fa-arrow-circle-up\");\n\n    }\n    this.isShown = !this.isShown;\n  }\n\n  goToModal() {\n   \n    let addMoreModal = this.modalCtrl.create('AddMoreModalPage');\n    addMoreModal.present();\n  \n  }\n\n  uploadPhoto(dc) {\n    var data = {\n      \"document_name\":dc['document_name']\n    };\n    var json = JSON.parse(localStorage.getItem(this.codes.K_ACCOUNT_INFO));\n \n    var data2 = {\n      \"srth_id\":json[0]['srth_id'],\n      \"worker_type\":\"driver\",\n      \"worker_id\":this.driver['worker_id'],\n      \"document_type\":\"document\",\n      \"type\":\"document\",\n      \"file_name\":json[0]['srth_id']+\"_\"+Date.now()+\".jpg\",\n      \"tags\":JSON.stringify(data)\n    }\n    \n    let cameraModalPage = this.modalCtrl.create('UploadImagePage',{\"request\":data2,'image':dc['document_image_id']});\n\n    cameraModalPage.onDidDismiss(resp => {\n      if(localStorage.getItem(\"selectedimage\") != null && localStorage.getItem(\"selectedimage\") != undefined) {\n        var img = JSON.parse(localStorage.getItem(\"selectedimage\"));\n        dc['document_image_id'] = img['image_url'];\n      }\n      else\n        dc['document_image_id'] = \"0\";\n    });\n    \n    cameraModalPage.present();\n  \n}\n\n  addPermit() {\n    let addPermit = this.modalCtrl.create('AddPermitPage');\n    addPermit.present();\n  }\n\n  exitModal(){\n    this.viewController.dismiss();\n  }\n\n  save(){\n\n    var json = JSON.parse(localStorage.getItem(this.codes.K_ACCOUNT_INFO));\n\n    for(let i=0;i<this.documents.length;i++){\n      this.documents[i]['worker_type'] = 'driver';\n      this.documents[i]['srth_id'] = json[0]['srth_id'];\n      this.documents[i]['driver_id'] = this.driver['worker_id'];\n      this.documents[i]['is_active'] = '1';\n      this.documents[i]['is_remove'] = '0';\n      this.documents[i]['last_maint_id']='srth_app';\n      this.documents[i]['opt_counter'] = '0';\n\n      this.rest.post(this.codes.UPDATE_DOCUMENT_INFO,this.documents[i]).then(resp => {\n        this.message.displayToast(this.documents[i]['document_name']+\" saved.\");\n      }); \n\n    }\n    this.navCtrl.pop();\n    // this.message.displayToast(\"All the documents are saved\");\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/driver-document/driver-document.ts"],"sourceRoot":""}